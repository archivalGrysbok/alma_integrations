<% holdings = results['results'] %>

<h2>Results for <%= results['id'] %> <%= results['title'] %></h2>

<section id="bibliographic_subrecord" class="subrecord-form-dummy">
  <h3>Bibliographic</h3>
  <div class="subrecord-form-container">
    <%= render_aspace_partial :partial => "alma_integrations/add_bibs_form", :locals => { :results => results } %>
  </div>
</section>

<section id="holdings_subrecord" class="subrecord-form-dummy">
  <h3>Holdings</h3>
  <div class="subrecord-form-container">
    <% if holdings.empty? %>
      <p>No holdings were found.</p>
    <% else %>
      <p><%= results['count'] %> Holdings location(s) found:</p>
      <table class="table table-striped table-bordered table-condensed table-hover table-search-results">
        <thead>
          <tr>
            <th><%= I18n.t("plugins.alma_integrations.labels.holdings_id") %></th>
            <th><%= I18n.t("plugins.alma_integrations.labels.location_code") %></th>
            <th><%= I18n.t("plugins.alma_integrations.labels.location_name") %></th>
          </tr>
        </thead>
        <tbody>
          <% holdings.each do |holding| %>
            <tr>
              <td class="holdings-id"><%= holding['id'] %></td>
              <td class="holdings-location-code"><%= holding['code'] %></td>
              <td class="holdings-location-name"><%= holding['name'] %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% end %>

    <h4>Add New Holdings</h4>
    <% if results['mms'].nil? %>
      <p>I can't add holdings until there's a BIB record for the Resource</p>
    <% else %>
      <%= render_aspace_partial :partial => "add_holdings_form", :locals => {
      :mms => results['mms'], :id => results['id'], :holdings => holdings
    } %>
    <% end %>
  </div>
</section>
